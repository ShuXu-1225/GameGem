{"remainingRequest":"/Users/jth/IdeaProjects/GameGem/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jth/IdeaProjects/GameGem/src/components/offerList/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jth/IdeaProjects/GameGem/src/components/offerList/List.vue","mtime":1625752510440},{"path":"/Users/jth/IdeaProjects/GameGem/node_modules/cache-loader/dist/cjs.js","mtime":1625748525933},{"path":"/Users/jth/IdeaProjects/GameGem/node_modules/babel-loader/lib/index.js","mtime":1625748526069},{"path":"/Users/jth/IdeaProjects/GameGem/node_modules/cache-loader/dist/cjs.js","mtime":1625748525933},{"path":"/Users/jth/IdeaProjects/GameGem/node_modules/vue-loader/lib/index.js","mtime":1625748531629}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldExpc3QsIGFkZFRhc2sgfSBmcm9tICdAL2FwaScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhcmFtczogewogICAgICAgIGNhdGVnb3J5OiAnJywgLy8gY2F0ZWdvcnk6IDAtQXBwIDEtU3VydmV5IDItVHJhaWwKICAgICAgICBkZWxGbGFnOiAnJywKICAgICAgICBkZXM6ICcnLAogICAgICAgIGRldmljZVR5cGU6ICcnLCAvLyBkZXZpY2U6IDAtYW5kcm9pZCAxLWlwaG9uZSAyLWlwYWQKICAgICAgICBlc3RpbWF0ZURheXM6ICcnLCAvLyBzb3J0IGJ5OiAwLU1vc3QgUG9wdWxhciAxLUhpZ2ggdG8gTG93IDItTGV2ZWwgb2YgRGlmZmljdWx0eQogICAgICAgIGdvYWw6ICcnLAogICAgICAgIGljb246ICcnLAogICAgICAgIGlkOiAnJywKICAgICAgICBrcGk6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMTUsCiAgICAgICAgcGtnOiAnJywKICAgICAgICBzdGF0dXM6ICcnLAogICAgICAgIHdlaWdodDogJycKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgY291bnQ6IDEwLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5vTW9yZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YUxpc3QubGVuZ3RoID49IHRoaXMudG90YWwKICAgIH0sCiAgICBkaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCB0aGlzLm5vTW9yZQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2VObyA9IDEKCiAgICAgIHRoaXMuZ2V0TGlzdCgnaW5pdCcpCiAgICB9LAoKICAgIGRvU2VhcmNoOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2VObyA9IDEKICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoa2V5ID0+IHsKICAgICAgICB0aGlzLnBhcmFtc1trZXldID0gcGFyYW1zW2tleV0KICAgICAgfSkKICAgICAgdGhpcy5nZXRMaXN0KCdpbml0JykKICAgIH0sCgogICAgZ2V0TGlzdDogZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBnZXRMaXN0KHRoaXMucGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICBpZiAocmVzICYmIHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy5yZXN1bHQKICAgICAgICAgIHRoaXMudG90YWwgPSByZXN1bHQudG90YWwKCiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2luaXQnKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSByZXN1bHQucmVjb3JkcwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdC5wdXNoKHJlc3VsdC5yZWNvcmRzKQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMucGFyYW1zLnBhZ2VObyArPSAxCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudG90YWwgPSAwCgogICAgICAgICAgaWYgKHR5cGUgPT09ICdpbml0JykgewogICAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gW10KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGFkZFRhc2s6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBvZmZlcklkOiBpdGVtLmlkLAogICAgICAgIHBsYXllcklkOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnR2FtZUdlbVVJRCcpCiAgICAgIH0KICAgICAgYWRkVGFzayhwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShyZXMpKQogICAgICAgIGlmIChyZXMgJiYgcmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQoKICAgICAgICAgIHRoaXMuZG9TZWFyY2goKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/offerList","sourcesContent":["<template>\n  <div class=\"list-container infinite-list-wrapper\" style=\"overflow: auto\">\n    <ul\n      class=\"list-ul\"\n      :infinite-scroll-disabled=\"disabled\"\n      v-infinite-scroll=\"getList\"\n    >\n      <template v-for=\"(item, index) in dataList\">\n        <li :key=\"index\" class=\"list-item\">\n          <el-card :body-style=\"{ padding: '10px' }\">\n            <el-row class=\"item-container\">\n              <div class=\"icon-container\">\n                <img :src=\"item.icon\" />\n              </div>\n\n              <div class=\"content-container\">\n                <el-row class=\"name\">{{ item.name }}</el-row>\n\n                <el-divider />\n\n                <el-row class=\"description\">{{ item.des }}</el-row>\n              </div>\n\n              <div class=\"button-container\">\n                <el-button\n                  type=\"success\"\n                  icon=\"el-icon-coin\"\n                  round\n                  @click=\"addTask(item)\"\n                >\n                  {{ item.goal }}\n                </el-button>\n              </div>\n            </el-row>\n          </el-card>\n        </li>\n      </template>\n    </ul>\n\n    <div v-if=\"loading\" class=\"loading\">\n      <i class=\"el-icon-loading\" />\n      loading...\n    </div>\n\n    <div v-if=\"!loading && noMore\" class=\"no-more\">\n      -- no more data --\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getList, addTask } from '@/api'\n\nexport default {\n  name: 'List',\n  data() {\n    return {\n      params: {\n        category: '', // category: 0-App 1-Survey 2-Trail\n        delFlag: '',\n        des: '',\n        deviceType: '', // device: 0-android 1-iphone 2-ipad\n        estimateDays: '', // sort by: 0-Most Popular 1-High to Low 2-Level of Difficulty\n        goal: '',\n        icon: '',\n        id: '',\n        kpi: '',\n        name: '',\n        pageNo: 1,\n        pageSize: 15,\n        pkg: '',\n        status: '',\n        weight: ''\n      },\n      total: 0,\n      dataList: [],\n      count: 10,\n      loading: false\n    }\n  },\n  computed: {\n    noMore() {\n      return this.dataList.length >= this.total\n    },\n    disabled() {\n      return this.loading || this.noMore\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init: function () {\n      this.params.pageNo = 1\n\n      this.getList('init')\n    },\n\n    doSearch: function (params) {\n      this.params.pageNo = 1\n      Object.keys(params).map(key => {\n        this.params[key] = params[key]\n      })\n      this.getList('init')\n    },\n\n    getList: function (type) {\n      this.loading = true\n      getList(this.params).then(res => {\n        this.loading = false\n        if (res && res.code === 200) {\n          const result = res.result\n          this.total = result.total\n\n          if (type === 'init') {\n            this.dataList = result.records\n          } else {\n            this.dataList.push(result.records)\n          }\n\n          this.params.pageNo += 1\n        } else {\n          this.total = 0\n\n          if (type === 'init') {\n            this.dataList = []\n          }\n        }\n      })\n    },\n\n    addTask: function (item) {\n      const params = {\n        offerId: item.id,\n        playerId: window.sessionStorage.getItem('GameGemUID')\n      }\n      addTask(params).then(res => {\n        alert(JSON.stringify(res))\n        if (res && res.code === 200) {\n          this.$notify({\n            title: '',\n            message: res.message,\n            type: 'success'\n          })\n\n          this.doSearch()\n        } else {\n          this.$notify({\n            title: '',\n            message: res.message,\n            type: 'error'\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.list-container {\n  height: calc(\n    100% - 58px\n  ); /* header`s height 48px; page padding`s height 10px  */\n\n  .list-ul {\n    list-style-type: none;\n    padding: 0 10px;\n\n    .list-item {\n      margin-top: 10px;\n      &:nth-child(1) {\n        margin-top: 0;\n      }\n\n      .item-container {\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: flex-start;\n\n        .icon-container {\n          width: 125px;\n          height: 125px;\n          padding: 10px;\n\n          img {\n            width: 100%;\n            height: 100%;\n          }\n        }\n\n        .content-container {\n          flex: 1;\n          min-width: 375px;\n        }\n\n        .button-container {\n          width: 125px;\n          padding: 10px;\n\n          button {\n            width: 100%;\n          }\n        }\n      }\n    }\n  }\n\n  .no-more,\n  .loading {\n    text-align: center;\n    font-size: 14px;\n    color: #424242;\n    opacity: 0.7;\n  }\n}\n</style>\n"]}]}